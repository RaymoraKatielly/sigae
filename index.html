<!doctype html>
<html lang="pt-BR">
 <head>
  <link rel="manifest" href="manifest.json">
  <meta charset="UTF-8">
  <title>Gestão Escolar ODS 4</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script><!-- Canva SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="w-full h-full m-0 p-0">
  <div id="app-root" class="w-full h-full flex items-center justify-center bg-white"><!-- App Wrapper (simula tela de celular) -->
   <div class="app-wrapper w-full max-w-xs h-full max-h-[640px] border border-gray-200 rounded-3xl shadow-sm flex flex-col overflow-hidden bg-white" aria-label="Protótipo de aplicativo Gestão Escolar ODS 4"><!-- Header -->
    <header class="app-header flex items-center justify-between px-4 pt-4 pb-2 border-b border-gray-100">
     <div class="flex items-center gap-2">
      <div class="logo-icon w-8 h-8 rounded-2xl flex items-center justify-center border border-gray-200" aria-hidden="true"><!-- Ícone simples de escola em SVG -->
       <svg class="w-5 h-5 text-blue-500" viewbox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 10.5L12 5l9 5.5-9 5.5-9-5.5Zm2 3.2V18l7 4 7-4v-4.3l-7 4.2-7-4.2Z" />
       </svg>
      </div>
      <div class="flex flex-col">
       <h1 id="app-title" class="text-sm font-semibold text-gray-900 leading-tight">Sistema de Gestão Escolar – ODS 4</h1>
       <p id="app-subtitle" class="text-[11px] text-gray-400 leading-tight">Foco em reduzir evasão escolar</p>
      </div>
     </div><span class="inline-flex items-center justify-center text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-600 font-medium"> ODS 4 </span>
    </header><!-- Navegação principal (abas) -->
    <nav class="main-tabs flex border-b border-gray-100 text-[11px] font-medium" aria-label="Navegação principal"><button class="tab-btn flex-1 py-2 text-center focus:outline-none" data-screen="login"> Login </button> <button class="tab-btn flex-1 py-2 text-center focus:outline-none" data-screen="aluno-dashboard"> Aluno </button> <button class="tab-btn flex-1 py-2 text-center focus:outline-none" data-screen="prof-dashboard"> Professor </button> <button class="tab-btn flex-1 py-2 text-center focus:outline-none" data-screen="mensagens"> Mensagens </button> <button class="tab-btn flex-1 py-2 text-center focus:outline-none" data-screen="perfil"> Perfil </button>
    </nav><!-- Conteúdo principal -->
    <main id="main-content" class="flex-1 overflow-y-auto px-4 py-3 bg-gray-50"><!-- TELAS (todas empilhadas; JS alterna a visibilidade) --> <!-- 1) LOGIN -->
     <section id="screen-login" class="screen flex flex-col gap-4" aria-label="Tela de login">
      <h2 id="login-title" class="text-base font-semibold text-gray-900">Bem-vindo(a)</h2>
      <p class="text-[11px] text-gray-500">Acesse para acompanhar frequência, notas e ações de apoio.</p>
      <form class="flex flex-col gap-3 mt-1" aria-label="Formulário de login">
       <div class="flex flex-col gap-1"><label for="login-email" class="text-[11px] font-medium text-gray-600">E-mail institucional</label> <input id="login-email" type="email" class="w-full px-3 py-2 rounded-full border border-gray-200 text-[12px] text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-400 bg-white" placeholder="nome.sobrenome@escola.edu">
       </div>
       <div class="flex flex-col gap-1"><label for="login-senha" class="text-[11px] font-medium text-gray-600">Senha</label> <input id="login-senha" type="password" class="w-full px-3 py-2 rounded-full border border-gray-200 text-[12px] text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-400 bg-white" placeholder="Digite sua senha">
       </div><button type="submit" id="btn-login" class="mt-1 w-full py-2.5 rounded-full text-[12px] font-semibold text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-200 transition-colors"> Entrar </button>
       <p class="text-[10px] text-gray-400 text-center mt-1">Demonstração – os dados são apenas ilustrativos.</p>
      </form>
     </section><!-- 2) DASHBOARD DO ALUNO -->
     <section id="screen-aluno-dashboard" class="screen hidden flex flex-col gap-3" aria-label="Dashboard do aluno">
      <header class="flex items-center justify-between">
       <div>
        <h2 id="student-dashboard-title" class="text-base font-semibold text-gray-900">Resumo do aluno</h2>
        <p class="text-[11px] text-gray-500">Visão geral de frequência, notas e tarefas.</p>
       </div>
       <div class="inline-flex items-center justify-center text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-600 font-medium">
        Aluno
       </div>
      </header><!-- KPIs -->
      <div class="grid grid-cols-2 gap-2 mt-1">
       <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2.5 flex flex-col gap-1" aria-label="Cartão de frequência">
        <div class="flex items-center justify-between gap-2"><span class="text-[11px] font-medium text-gray-600"> Frequência </span> <span class="text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-600">Últimos 30 dias</span>
        </div>
        <div class="flex items-end justify-between mt-1"><span class="text-lg font-semibold text-gray-900">92%</span> <!-- Gráfico de barras minimalista -->
         <div class="flex items-end gap-[2px] h-10" aria-hidden="true">
          <div class="w-1.5 bg-blue-100 rounded-t-lg" style="height: 35%;"></div>
          <div class="w-1.5 bg-blue-200 rounded-t-lg" style="height: 60%;"></div>
          <div class="w-1.5 bg-blue-300 rounded-t-lg" style="height: 80%;"></div>
          <div class="w-1.5 bg-blue-400 rounded-t-lg" style="height: 70%;"></div>
          <div class="w-1.5 bg-blue-500 rounded-t-lg" style="height: 90%;"></div>
         </div>
        </div>
       </article>
       <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2.5 flex flex-col gap-1" aria-label="Cartão de notas">
        <div class="flex items-center justify-between gap-2"><span class="text-[11px] font-medium text-gray-600"> Média geral </span> <span class="text-[10px] text-gray-400"> Bimestre </span>
        </div>
        <div class="flex items-end justify-between mt-1"><span class="text-lg font-semibold text-gray-900">8,1</span> <!-- Mini gráfico de linha -->
         <svg class="w-14 h-10 text-blue-400" viewbox="0 0 60 40" aria-hidden="true"><polyline fill="none" stroke="currentColor" stroke-width="2" points="2,30 15,26 28,18 41,22 58,12" /> <circle cx="58" cy="12" r="2" fill="currentColor" />
         </svg>
        </div>
       </article>
      </div><!-- Tarefas e alertas -->
      <div class="mt-1 flex flex-col gap-2">
       <section aria-label="Tarefas pendentes">
        <div class="flex items-center justify-between mb-1">
         <h3 class="text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Tarefas</h3><button type="button" class="text-[10px] text-blue-600 font-medium focus:outline-none"> Ver todas </button>
        </div>
        <div class="space-y-1.5">
         <div class="flex items-center justify-between rounded-xl bg-white border border-gray-100 px-3 py-2">
          <div>
           <p class="text-[11px] font-medium text-gray-900">Redação sobre ODS 4</p>
           <p class="text-[10px] text-gray-400">Entrega até 20/11</p>
          </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-600">Pendente</span>
         </div>
         <div class="flex items-center justify-between rounded-xl bg-white border border-gray-100 px-3 py-2">
          <div>
           <p class="text-[11px] font-medium text-gray-900">Lista de exercícios – Matemática</p>
           <p class="text-[10px] text-gray-400">Entrega até 25/11</p>
          </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-gray-100 text-gray-600">Em andamento</span>
         </div>
        </div>
       </section>
       <section aria-label="Alertas e recomendações">
        <div class="flex items-center justify-between mb-1">
         <h3 class="text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Alertas</h3>
        </div>
        <div class="rounded-xl bg-blue-50 border border-blue-100 px-3 py-2 flex gap-2 items-start">
         <div class="mt-[2px] w-4 h-4 rounded-full border border-blue-300 flex items-center justify-center text-[10px] text-blue-700" aria-hidden="true">
          !
         </div>
         <p class="text-[10px] text-blue-900 leading-snug">Sua frequência em Matemática caiu para 80% nas últimas 2 semanas. Converse com seu professor para alinhar estratégias.</p>
        </div>
       </section>
      </div>
     </section><!-- 3) FREQUÊNCIA -->
     <section id="screen-frequencia" class="screen hidden flex flex-col gap-3" aria-label="Tela de frequência">
      <header class="flex items-center justify-between">
       <div>
        <h2 class="text-base font-semibold text-gray-900">Frequência</h2>
        <p class="text-[11px] text-gray-500">Acompanhe presença por disciplina.</p>
       </div>
      </header><!-- Gráfico donut simples -->
      <div class="rounded-2xl bg-white border border-gray-100 px-4 py-4 flex flex-col items-center gap-2">
       <div class="relative w-28 h-28" aria-hidden="true">
        <svg viewbox="0 0 36 36" class="w-full h-full"><path class="text-gray-100" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.5
                     a 15.5 15.5 0 1 1 0 31
                     a 15.5 15.5 0 1 1 0 -31" /> <path class="text-blue-400" stroke="currentColor" stroke-width="3" stroke-linecap="round" fill="none" stroke-dasharray="92, 100" d="M18 2.5
                     a 15.5 15.5 0 1 1 0 31
                     a 15.5 15.5 0 1 1 0 -31" />
        </svg>
        <div class="absolute inset-0 flex flex-col items-center justify-center"><span class="text-xs text-gray-400">Geral</span> <span class="text-lg font-semibold text-gray-900">92%</span>
        </div>
       </div>
       <p class="text-[10px] text-gray-500 text-center">Frequência média geral do período.</p>
      </div><!-- Lista de disciplinas -->
      <section aria-label="Frequência por disciplina">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Por disciplina</h3>
       <div class="space-y-1.5"><!-- Item -->
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div class="flex flex-col">
          <h4 class="text-[11px] font-medium text-gray-900">Matemática</h4>
          <p class="text-[10px] text-gray-400">18 de 20 aulas</p>
         </div>
         <div class="flex items-center gap-2"><span class="text-[11px] font-semibold text-gray-900">90%</span>
          <div class="w-16 h-[5px] rounded-full bg-gray-100 overflow-hidden" aria-hidden="true">
           <div class="h-full bg-blue-400" style="width: 90%;"></div>
          </div>
         </div>
        </article>
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div class="flex flex-col">
          <h4 class="text-[11px] font-medium text-gray-900">Língua Portuguesa</h4>
          <p class="text-[10px] text-gray-400">19 de 20 aulas</p>
         </div>
         <div class="flex items-center gap-2"><span class="text-[11px] font-semibold text-gray-900">95%</span>
          <div class="w-16 h-[5px] rounded-full bg-gray-100 overflow-hidden" aria-hidden="true">
           <div class="h-full bg-blue-400" style="width: 95%;"></div>
          </div>
         </div>
        </article>
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div class="flex flex-col">
          <h4 class="text-[11px] font-medium text-gray-900">História</h4>
          <p class="text-[10px] text-gray-400">16 de 20 aulas</p>
         </div>
         <div class="flex items-center gap-2"><span class="text-[11px] font-semibold text-gray-900">80%</span>
          <div class="w-16 h-[5px] rounded-full bg-gray-100 overflow-hidden" aria-hidden="true">
           <div class="h-full bg-blue-400" style="width: 80%;"></div>
          </div>
         </div>
        </article>
       </div>
      </section>
     </section><!-- 4) NOTAS -->
     <section id="screen-notas" class="screen hidden flex flex-col gap-3" aria-label="Tela de notas">
      <header class="flex items-center justify-between">
       <div>
        <h2 class="text-base font-semibold text-gray-900">Notas</h2>
        <p class="text-[11px] text-gray-500">Médias por disciplina e evolução.</p>
       </div>
      </header><!-- Cartões de notas -->
      <section aria-label="Notas por disciplina">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Bimestre atual</h3>
       <div class="grid grid-cols-2 gap-2">
        <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2 flex flex-col gap-1"><span class="text-[10px] font-medium text-gray-500">Matemática</span>
         <div class="flex items-end justify-between"><span class="text-xl font-semibold text-gray-900">8,5</span> <span class="text-[10px] text-blue-500 font-medium">Aprovado</span>
         </div>
        </article>
        <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2 flex flex-col gap-1"><span class="text-[10px] font-medium text-gray-500">Língua Portuguesa</span>
         <div class="flex items-end justify-between"><span class="text-xl font-semibold text-gray-900">7,9</span> <span class="text-[10px] text-blue-500 font-medium">Aprovado</span>
         </div>
        </article>
        <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2 flex flex-col gap-1"><span class="text-[10px] font-medium text-gray-500">História</span>
         <div class="flex items-end justify-between"><span class="text-xl font-semibold text-gray-900">7,0</span> <span class="text-[10px] text-gray-500 font-medium">Atenção</span>
         </div>
        </article>
        <article class="rounded-2xl bg-white border border-gray-100 px-3 py-2 flex flex-col gap-1"><span class="text-[10px] font-medium text-gray-500">Ciências</span>
         <div class="flex items-end justify-between"><span class="text-xl font-semibold text-gray-900">8,8</span> <span class="text-[10px] text-blue-500 font-medium">Aprovado</span>
         </div>
        </article>
       </div>
      </section><!-- Gráfico simples -->
      <section aria-label="Gráfico de evolução de notas">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Evolução da média</h3>
       <div class="rounded-2xl bg-white border border-gray-100 px-3 py-3">
        <svg class="w-full h-24 text-blue-400" viewbox="0 0 120 60" aria-hidden="true"><!-- Linha de base --> <line x1="5" y1="50" x2="115" y2="50" stroke="#e5e7eb" stroke-width="1" /> <!-- Curva --> <polyline fill="none" stroke="currentColor" stroke-width="2" points="5,45 30,40 55,35 80,30 115,25" /> <!-- Pontos --> <circle cx="5" cy="45" r="2" fill="currentColor" /> <circle cx="30" cy="40" r="2" fill="currentColor" /> <circle cx="55" cy="35" r="2" fill="currentColor" /> <circle cx="80" cy="30" r="2" fill="currentColor" /> <circle cx="115" cy="25" r="2" fill="currentColor" />
        </svg>
        <div class="mt-2 flex items-center justify-between text-[10px] text-gray-400"><span>1º Bim.</span> <span>2º Bim.</span> <span>3º Bim.</span> <span>4º Bim.</span>
        </div>
       </div>
      </section>
     </section><!-- 5) PAINEL DO PROFESSOR (RISCO) -->
     <section id="screen-prof-dashboard" class="screen hidden flex flex-col gap-3" aria-label="Painel do professor">
      <header class="flex items-center justify-between">
       <div>
        <h2 id="teacher-dashboard-title" class="text-base font-semibold text-gray-900">Painel do professor</h2>
        <p class="text-[11px] text-gray-500">Alunos com risco de evasão.</p>
       </div>
       <div class="inline-flex items-center justify-center text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-600 font-medium">
        Professor
       </div>
      </header>
      <div class="rounded-2xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
       <div class="flex flex-col"><span class="text-[11px] font-medium text-gray-900">Turma 9º A</span> <span class="text-[10px] text-gray-400"> 3 alunos com risco alto </span>
       </div><button type="button" class="text-[10px] px-2 py-[4px] rounded-full bg-blue-500 text-white font-medium focus:outline-none" data-screen-target="aluno-detalhes"> Ver aluno </button>
      </div><!-- Lista de alunos com risco -->
      <section aria-label="Lista de alunos por nível de risco">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Alunos sinalizados</h3>
       <div class="space-y-1.5">
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div>
          <p class="text-[11px] font-medium text-gray-900">Ana Souza</p>
          <p class="text-[10px] text-gray-400">Frequência 78% · Média 6,5</p>
         </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-red-50 text-red-600 font-medium">Risco alto</span>
        </article>
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div>
          <p class="text-[11px] font-medium text-gray-900">João Lima</p>
          <p class="text-[10px] text-gray-400">Frequência 84% · Média 7,0</p>
         </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-yellow-50 text-yellow-700 font-medium">Risco médio</span>
        </article>
        <article class="rounded-xl bg-white border border-gray-100 px-3 py-2 flex items-center justify-between">
         <div>
          <p class="text-[11px] font-medium text-gray-900">Pedro Alves</p>
          <p class="text-[10px] text-gray-400">Frequência 90% · Média 7,8</p>
         </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-blue-50 text-blue-700 font-medium">Risco baixo</span>
        </article>
       </div>
      </section>
     </section><!-- 6) DETALHES DO ALUNO -->
     <section id="screen-aluno-detalhes" class="screen hidden flex flex-col gap-3" aria-label="Detalhes do aluno">
      <header class="flex items-center justify-between">
       <div>
        <h2 class="text-base font-semibold text-gray-900">Ana Souza</h2>
        <p class="text-[11px] text-gray-500">9º A · Código: 0234</p>
       </div><span class="text-[10px] px-2 py-[2px] rounded-full bg-red-50 text-red-600 font-medium">Risco alto</span>
      </header><!-- Indicadores -->
      <div class="grid grid-cols-3 gap-2">
       <div class="rounded-2xl bg-white border border-gray-100 px-2.5 py-2 flex flex-col gap-1"><span class="text-[10px] text-gray-500">Frequência</span> <span class="text-base font-semibold text-gray-900">78%</span>
       </div>
       <div class="rounded-2xl bg-white border border-gray-100 px-2.5 py-2 flex flex-col gap-1"><span class="text-[10px] text-gray-500">Média</span> <span class="text-base font-semibold text-gray-900">6,5</span>
       </div>
       <div class="rounded-2xl bg-white border border-gray-100 px-2.5 py-2 flex flex-col gap-1"><span class="text-[10px] text-gray-500">Participações</span> <span class="text-base font-semibold text-gray-900">Baixa</span>
       </div>
      </div><!-- Ações do professor -->
      <section aria-label="Ações do professor">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Ações de acompanhamento</h3>
       <div class="flex flex-col gap-1.5"><button type="button" class="w-full py-2 rounded-full bg-blue-500 text-white text-[11px] font-semibold focus:outline-none focus:ring-2 focus:ring-blue-200"> Registrar contato com responsável </button> <button type="button" class="w-full py-2 rounded-full bg-white border border-gray-200 text-[11px] text-gray-800 font-semibold focus:outline-none focus:ring-2 focus:ring-blue-200"> Planejar reforço individual </button> <button type="button" class="w-full py-2 rounded-full bg-white border border-gray-200 text-[11px] text-gray-800 font-semibold focus:outline-none focus:ring-2 focus:ring-blue-200"> Enviar mensagem ao aluno </button>
       </div>
      </section>
     </section><!-- 7) MENSAGENS / CHAT -->
     <section id="screen-mensagens" class="screen hidden flex flex-col gap-2 h-full" aria-label="Tela de mensagens">
      <header class="flex items-center justify-between mb-1">
       <div>
        <h2 id="messages-title" class="text-base font-semibold text-gray-900">Mensagens</h2>
        <p class="text-[11px] text-gray-500">Conversas entre aluno, família e escola.</p>
       </div>
      </header><!-- Lista de chat -->
      <div class="flex-1 rounded-2xl bg-white border border-gray-100 px-3 py-2 flex flex-col gap-1.5 overflow-y-auto"><!-- Dia -->
       <div class="self-center text-[10px] text-gray-400 my-1">
        Hoje
       </div><!-- Mensagem recebida -->
       <div class="flex items-start gap-2">
        <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-[10px] text-blue-700" aria-hidden="true">
         P
        </div>
        <div class="max-w-[75%] rounded-2xl rounded-tl-sm bg-gray-50 border border-gray-100 px-2.5 py-1.5">
         <p class="text-[10px] font-medium text-gray-800">Prof. Marina</p>
         <p class="text-[10px] text-gray-700 leading-snug">Olá, Ana! Podemos conversar sobre sua participação nas aulas desta semana?</p><span class="mt-1 block text-[9px] text-gray-400">14:20</span>
        </div>
       </div><!-- Mensagem enviada -->
       <div class="flex items-start justify-end gap-2">
        <div class="max-w-[75%] rounded-2xl rounded-tr-sm bg-blue-500 px-2.5 py-1.5 text-right">
         <p class="text-[10px] text-white leading-snug">Claro, professora. Tive alguns problemas em casa, mas quero melhorar.</p><span class="mt-1 block text-[9px] text-blue-100">14:22</span>
        </div>
       </div>
      </div><!-- Campo de nova mensagem -->
      <form id="chat-form" class="mt-1 flex items-center gap-2" aria-label="Enviar nova mensagem"><label for="chat-input" class="sr-only">Mensagem</label> <input id="chat-input" type="text" class="flex-1 px-3 py-2 rounded-full border border-gray-200 text-[12px] text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-200 focus:border-blue-400 bg-white" placeholder="Escreva uma mensagem..."> <button type="submit" class="w-9 h-9 rounded-full bg-blue-500 text-white flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-200"> <span class="sr-only">Enviar</span>
        <svg class="w-4 h-4" viewbox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 20v-5.5l8-2-8-2V5l16 7-16 8Z" />
        </svg></button>
      </form>
     </section><!-- 8) PERFIL -->
     <section id="screen-perfil" class="screen hidden flex flex-col gap-3" aria-label="Tela de perfil">
      <header class="flex items-center gap-3">
       <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-sm font-semibold text-blue-700">
        AS
       </div>
       <div class="flex flex-col">
        <h2 id="profile-title" class="text-base font-semibold text-gray-900">Perfil</h2>
        <p class="text-[11px] text-gray-500">Dados básicos do usuário.</p>
       </div>
      </header><!-- Dados -->
      <section aria-label="Dados pessoais">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Dados do aluno</h3>
       <div class="rounded-2xl bg-white border border-gray-100">
        <dl class="divide-y divide-gray-100 text-[11px]">
         <div class="flex justify-between px-3 py-2">
          <dt class="text-gray-500">
           Nome
          </dt>
          <dd class="text-gray-900 font-medium">
           Ana Souza
          </dd>
         </div>
         <div class="flex justify-between px-3 py-2">
          <dt class="text-gray-500">
           Turma
          </dt>
          <dd class="text-gray-900 font-medium">
           9º A
          </dd>
         </div>
         <div class="flex justify-between px-3 py-2">
          <dt class="text-gray-500">
           E-mail
          </dt>
          <dd class="text-gray-900 font-medium">
           ana.souza@escola.edu
          </dd>
         </div>
        </dl>
       </div>
      </section><!-- Opções -->
      <section aria-label="Configurações básicas">
       <h3 class="mb-1 text-[11px] font-semibold text-gray-800 uppercase tracking-wide">Opções</h3>
       <div class="space-y-1.5 text-[11px]"><button type="button" class="w-full flex items-center justify-between rounded-xl bg-white border border-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"> <span class="text-gray-800">Notificações</span> <span class="text-gray-400">Ativadas</span> </button> <button type="button" class="w-full flex items-center justify-between rounded-xl bg-white border border-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"> <span class="text-gray-800">Idioma</span> <span class="text-gray-400">Português</span> </button> <button type="button" class="w-full flex items-center justify-between rounded-xl bg-white border border-gray-100 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"> <span class="text-gray-800">Ajuda e suporte</span> <span class="text-gray-400">ODS 4</span> </button>
       </div>
      </section>
     </section>
    </main><!-- Navegação secundária para telas internas (frequência / notas) -->
    <footer class="flex items-center justify-between px-4 py-2 border-t border-gray-100 bg-white text-[11px]">
     <div class="flex gap-1.5"><button type="button" class="secondary-tab-btn px-2 py-1 rounded-full focus:outline-none" data-screen="frequencia"> Frequência </button> <button type="button" class="secondary-tab-btn px-2 py-1 rounded-full focus:outline-none" data-screen="notas"> Notas </button> <button type="button" class="secondary-tab-btn px-2 py-1 rounded-full focus:outline-none" data-screen="aluno-detalhes"> Detalhes aluno </button>
     </div><span class="text-[10px] text-gray-400"> Protótipo · ODS 4 </span>
    </footer>
   </div>
  </div>
  <script>
    // ---------------------------
    // CONFIG INICIAL / STATE
    // ---------------------------
    const defaultConfig = {
      app_title: "Sistema de Gestão Escolar – ODS 4",
      login_title: "Bem-vindo(a)",
      student_dashboard_title: "Resumo do aluno",
      teacher_dashboard_title: "Painel do professor",
      messages_title: "Mensagens",
      profile_title: "Perfil",
      primary_color: "#3b82f6", // azul suave
      surface_color: "#ffffff",
      background_color: "#f9fafb", // cinza muito claro
      text_color: "#111827",
      secondary_text_color: "#6b7280",
      font_family: "system",
      font_size: 13
    };

    // Aponta para o config atual do SDK ou defaults
    let currentConfig = { ...defaultConfig };

    // ---------------------------
    // APLICAÇÃO DE CONFIG NA UI
    // ---------------------------
    async function onConfigChange(config) {
      currentConfig = { ...defaultConfig, ...config };

      const root = document.getElementById("app-root");
      const appWrapper = document.querySelector(".app-wrapper");
      const header = document.querySelector(".app-header");
      const main = document.getElementById("main-content");
      const footer = document.querySelector("footer");

      // Cores
      const bgColor = currentConfig.background_color || defaultConfig.background_color;
      const surfaceColor = currentConfig.surface_color || defaultConfig.surface_color;
      const primaryColor = currentConfig.primary_color || defaultConfig.primary_color;
      const textColor = currentConfig.text_color || defaultConfig.text_color;
      const secondaryTextColor =
        currentConfig.secondary_text_color || defaultConfig.secondary_text_color;

      root.style.backgroundColor = surfaceColor;
      appWrapper.style.backgroundColor = surfaceColor;
      main.style.backgroundColor = bgColor;
      header.style.backgroundColor = surfaceColor;
      footer.style.backgroundColor = surfaceColor;

      // Aplicar cor primária em alguns elementos existentes
      const primaryButtons = document.querySelectorAll(
        "#btn-login, " +
          "button.bg-blue-500, " +
          "div.bg-blue-500, " +
          ".secondary-tab-btn-active"
      );

      primaryButtons.forEach((btn) => {
        btn.style.backgroundColor = primaryColor;
        btn.style.borderColor = primaryColor;
      });

      const primaryBadges = document.querySelectorAll(
        "span.bg-blue-50, div.bg-blue-50"
      );
      primaryBadges.forEach((el) => {
        el.style.backgroundColor = lightenColor(primaryColor, 0.85);
        el.style.color = primaryColor;
      });

      // Textos
      const appTitleEl = document.getElementById("app-title");
      const loginTitleEl = document.getElementById("login-title");
      const studentDashboardTitleEl = document.getElementById(
        "student-dashboard-title"
      );
      const teacherDashboardTitleEl = document.getElementById(
        "teacher-dashboard-title"
      );
      const messagesTitleEl = document.getElementById("messages-title");
      const profileTitleEl = document.getElementById("profile-title");

      if (appTitleEl) {
        appTitleEl.textContent =
          currentConfig.app_title || defaultConfig.app_title;
      }
      if (loginTitleEl) {
        loginTitleEl.textContent =
          currentConfig.login_title || defaultConfig.login_title;
      }
      if (studentDashboardTitleEl) {
        studentDashboardTitleEl.textContent =
          currentConfig.student_dashboard_title ||
          defaultConfig.student_dashboard_title;
      }
      if (teacherDashboardTitleEl) {
        teacherDashboardTitleEl.textContent =
          currentConfig.teacher_dashboard_title ||
          defaultConfig.teacher_dashboard_title;
      }
      if (messagesTitleEl) {
        messagesTitleEl.textContent =
          currentConfig.messages_title || defaultConfig.messages_title;
      }
      if (profileTitleEl) {
        profileTitleEl.textContent =
          currentConfig.profile_title || defaultConfig.profile_title;
      }

      // Tipografia
      const baseSize =
        Number(currentConfig.font_size) || defaultConfig.font_size;
      const customFont =
        currentConfig.font_family || defaultConfig.font_family;
      const baseStack = "system-ui, -apple-system, BlinkMacSystemFont, sans-serif";
      const fullFontStack = `${customFont}, ${baseStack}`;

      document.querySelectorAll("body, body *").forEach((el) => {
        el.style.fontFamily = fullFontStack;
      });

      // Escala de fontes
      if (appTitleEl) appTitleEl.style.fontSize = `${baseSize * 1.1}px`;
      if (loginTitleEl) loginTitleEl.style.fontSize = `${baseSize * 1.2}px`;
      if (studentDashboardTitleEl)
        studentDashboardTitleEl.style.fontSize = `${baseSize * 1.2}px`;
      if (teacherDashboardTitleEl)
        teacherDashboardTitleEl.style.fontSize = `${baseSize * 1.2}px`;
      if (messagesTitleEl)
        messagesTitleEl.style.fontSize = `${baseSize * 1.2}px`;
      if (profileTitleEl)
        profileTitleEl.style.fontSize = `${baseSize * 1.2}px`;

      // Textos padrão
      document.querySelectorAll("p, span, dt, dd, button, label, input").forEach(
        (el) => {
          const role = el.getAttribute("data-role");
          if (role === "caption") {
            el.style.fontSize = `${baseSize * 0.75}px`;
          } else if (role === "label") {
            el.style.fontSize = `${baseSize * 0.85}px`;
          } else {
            el.style.fontSize = `${baseSize}px`;
          }
        }
      );

      // Cor de texto geral
      document.querySelectorAll("h1, h2, h3, h4, p, span, dt, dd, label").forEach(
        (el) => {
          el.style.color = textColor;
        }
      );
      document
        .querySelectorAll(".text-gray-400, .text-gray-500, .text-gray-600")
        .forEach((el) => {
          el.style.color = secondaryTextColor;
        });
    }

    // Função auxiliar simples para clarear cor
    function lightenColor(hex, luminosity) {
      // hex normalizado
      hex = hex.replace(/[^0-9a-f]/gi, "");
      if (hex.length < 6) {
        hex =
          hex[0] +
          hex[0] +
          hex[1] +
          hex[1] +
          hex[2] +
          hex[2];
      }
      let rgb = "#",
        c,
        i;
      for (i = 0; i < 3; i++) {
        c = parseInt(hex.substr(i * 2, 2), 16);
        c = Math.round(
          Math.min(Math.max(0, c + c * luminosity), 255)
        ).toString(16);
        rgb += ("00" + c).substr(c.length);
      }
      return rgb;
    }

    // ---------------------------
    // CAPABILITIES
    // ---------------------------
    function mapToCapabilities(config) {
      const cfg = { ...defaultConfig, ...config };

      const recolorables = [
        {
          get: () => cfg.background_color,
          set: (value) => {
            cfg.background_color = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({
                background_color: value
              });
            }
          }
        },
        {
          get: () => cfg.surface_color,
          set: (value) => {
            cfg.surface_color = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({
                surface_color: value
              });
            }
          }
        },
        {
          get: () => cfg.primary_color,
          set: (value) => {
            cfg.primary_color = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({
                primary_color: value
              });
            }
          }
        },
        {
          get: () => cfg.text_color,
          set: (value) => {
            cfg.text_color = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({
                text_color: value
              });
            }
          }
        },
        {
          get: () => cfg.secondary_text_color,
          set: (value) => {
            cfg.secondary_text_color = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({
                secondary_text_color: value
              });
            }
          }
        }
      ];

      const fontEditable = {
        get: () => cfg.font_family,
        set: (value) => {
          cfg.font_family = value;
          if (window.elementSdk) {
            window.elementSdk.setConfig({
              font_family: value
            });
          }
        }
      };

      const fontSizeable = {
        get: () => cfg.font_size,
        set: (value) => {
          cfg.font_size = value;
          if (window.elementSdk) {
            window.elementSdk.setConfig({
              font_size: value
            });
          }
        }
      };

      return {
        recolorables,
        borderables: [],
        fontEditable,
        fontSizeable
      };
    }

    function mapToEditPanelValues(config) {
      const cfg = { ...defaultConfig, ...config };
      return new Map([
        ["app_title", cfg.app_title],
        ["login_title", cfg.login_title],
        ["student_dashboard_title", cfg.student_dashboard_title],
        ["teacher_dashboard_title", cfg.teacher_dashboard_title],
        ["messages_title", cfg.messages_title],
        ["profile_title", cfg.profile_title]
      ]);
    }

    // ---------------------------
    // NAVEGAÇÃO ENTRE TELAS
    // ---------------------------
    function showScreen(id) {
      const screens = document.querySelectorAll(".screen");
      screens.forEach((s) => {
        s.classList.add("hidden");
      });
      const active = document.getElementById(`screen-${id}`);
      if (active) {
        active.classList.remove("hidden");
      }

      // Abas principais
      const tabButtons = document.querySelectorAll(".tab-btn");
      tabButtons.forEach((btn) => {
        const screen = btn.getAttribute("data-screen");
        if (screen === id) {
          btn.classList.add("border-b-2", "border-blue-500", "text-blue-600");
        } else {
          btn.classList.remove(
            "border-b-2",
            "border-blue-500",
            "text-blue-600"
          );
        }
      });

      // Abas secundárias
      const secButtons = document.querySelectorAll(".secondary-tab-btn");
      secButtons.forEach((btn) => {
        const screen = btn.getAttribute("data-screen");
        if (screen === id) {
          btn.classList.add(
            "secondary-tab-btn-active",
            "bg-blue-500",
            "text-white"
          );
          btn.classList.remove("bg-white", "text-gray-700");
        } else {
          btn.classList.remove(
            "secondary-tab-btn-active",
            "bg-blue-500",
            "text-white"
          );
          btn.classList.add("bg-white", "text-gray-700");
        }
      });
    }

    function initNavigation() {
      const mainTabs = document.querySelectorAll(".tab-btn");
      mainTabs.forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = btn.getAttribute("data-screen");
          showScreen(target);
        });
      });

      const secondaryTabs = document.querySelectorAll(".secondary-tab-btn");
      secondaryTabs.forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = btn.getAttribute("data-screen");
          showScreen(target);
        });
      });

      const profButtons = document.querySelectorAll(
        "[data-screen-target='aluno-detalhes']"
      );
      profButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          showScreen("aluno-detalhes");
        });
      });

      // Tela inicial: Login
      showScreen("login");
    }

    // ---------------------------
    // FORMULÁRIOS (LOGIN / CHAT)
    // ---------------------------
    function initForms() {
      const loginForm = document.querySelector("#screen-login form");
      if (loginForm) {
        loginForm.addEventListener("submit", (e) => {
          e.preventDefault();
          // No protótipo, apenas navega para o dashboard do aluno
          showScreen("aluno-dashboard");
        });
      }

      const chatForm = document.getElementById("chat-form");
      const chatInput = document.getElementById("chat-input");
      const chatContainer = document.querySelector(
        "#screen-mensagens .rounded-2xl.bg-white.border"
      );

      if (chatForm && chatInput && chatContainer) {
        chatForm.addEventListener("submit", (e) => {
          e.preventDefault();
          const text = chatInput.value.trim();
          if (!text) return;

          const msgWrapper = document.createElement("div");
          msgWrapper.className =
            "flex items-start justify-end gap-2";

          const bubble = document.createElement("div");
          bubble.className =
            "max-w-[75%] rounded-2xl rounded-tr-sm bg-blue-500 px-2.5 py-1.5 text-right";

          const p = document.createElement("p");
          p.className = "text-[10px] text-white leading-snug";
          p.textContent = text;

          const time = document.createElement("span");
          time.className =
            "mt-1 block text-[9px] text-blue-100";
          const now = new Date();
          time.textContent = `${String(
            now.getHours()
          ).padStart(2, "0")}:${String(
            now.getMinutes()
          ).padStart(2, "0")}`;

          bubble.appendChild(p);
          bubble.appendChild(time);
          msgWrapper.appendChild(bubble);
          chatContainer.appendChild(msgWrapper);

          chatInput.value = "";
          chatContainer.scrollTop = chatContainer.scrollHeight;
        });
      }
    }

    // ---------------------------
    // INICIALIZAÇÃO DO ELEMENT SDK
    // ---------------------------
    (function init() {
      initNavigation();
      initForms();
      // Aplica config default logo de início
      onConfigChange(defaultConfig);

      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }
    })();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a46907227835cf3',t:'MTc2NDEzMDUyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
 <script>
 if ("serviceWorker" in navigator) {
   navigator.serviceWorker.register("service-worker.js");
 }
</script>
 </body>
</html>